<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/assets/styles/navbar.css">
  <link rel="stylesheet" href="/assets/styles/information.css">
  <link rel="stylesheet" href="/assets/styles/tattooartistscrud.css">
  </head>

<body>
    <h1>Lista de Tatuadores</h1>

  <table id="tattooTable">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Celular</th>
        <th>Documento</th>
        <th>Correo</th>
        <th>Contraseña</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="tattooArtists">
      <!-- Aquí se llenarán los datos de los tatuadores -->
    </tbody>
  </table>

  <button id="createButton">Crear Tatuador</button>

<form id="createForm" style="display: none;">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre">
    <label for="apellido">Apellido:</label>
    <input type="text" id="apellido" name="apellido">
    <label for="celular">Celular:</label>
    <input type="text" id="celular" name="celular">
    <label for="documento">Documento:</label>
    <input type="text" id="documento" name="documento">
    <label for="correo">Correo:</label>
    <input type="text" id="correo" name="correo">
    <label for="contraseña">Contraseña:</label>
    <input type="password" id="contraseña" name="contraseña">
    <input type="submit" value="Guardar">
    <button id="closeButton">x</button>
</form>
  
</body>
<script>
  document.addEventListener('DOMContentLoaded', function () {
  const createButton = document.getElementById('createButton');
  const createForm = document.getElementById('createForm');
  const tattooTable = document.getElementById('tattooTable');
  const closeButton = document.getElementById('closeButton');

  createButton.addEventListener('click', openForm);

  closeButton.addEventListener('click', function() {
    closeForm(createForm);
  });
  const tattooArtists = document.getElementById('tattooArtists');
  const tattooData = [
    {
      nombre: "Carlos",
      apellido: "García",
      celular: "123-456-7890",
      documento: "ABC123",
      correo: "carlos@example.com",
      contraseña: "contraseña123"
    },
    {
      nombre: "Laura",
      apellido: "Martínez",
      celular: "987-654-3210",
      documento: "XYZ789",
      correo: "laura@example.com",
      contraseña: "laura123"
    }
    // ... otros tatuadores
  ];

  function createTattooArtistRow(tattooArtist) {
    const row = document.createElement('tr');

    const { nombre, apellido, celular, documento, correo, contraseña } = tattooArtist;

    const rowData = [nombre, apellido, celular, documento, correo, contraseña];

    rowData.forEach(data => {
      const cell = document.createElement('td');
      cell.textContent = data;
      row.appendChild(cell);
    });

    const editButton = document.createElement('button');
    editButton.textContent = 'Editar';
    editButton.classList.add('editButton');

    const deleteButton = document.createElement('button');
    deleteButton.textContent = 'Borrar';
    deleteButton.classList.add('deleteButton');

    const cell = document.createElement('td');
    cell.appendChild(editButton);
    cell.appendChild(deleteButton);
    row.appendChild(cell);

    return row;
  }

  function populateTable(data) {
    data.forEach(tattooArtist => {
      const row = createTattooArtistRow(tattooArtist);
      tattooArtists.appendChild(row);
    });
  }

  function openForm() {
    tattooTable.style.display = 'none';
    createForm.style.display = 'block';
    createButton.style.display = 'none';
  }

  function closeForm() {
    tattooTable.style.display = 'table';
    createForm.style.display = 'none';
    createButton.style.display = 'block';
  }

  function saveOrUpdateTattooArtist() {
    const editedTattooArtist = {
      nombre: document.getElementById('nombre').value,
      apellido: document.getElementById('apellido').value,
      celular: document.getElementById('celular').value,
      documento: document.getElementById('documento').value,
      correo: document.getElementById('correo').value,
      contraseña: document.getElementById('contraseña').value
    };

    const editMode = createForm.dataset.editMode === 'true';

    if (editMode) {
      const rowToUpdate = tattooArtists.querySelector('.editButton:focus').parentElement.parentElement;
      const index = Array.from(tattooArtists.children).indexOf(rowToUpdate);

      tattooData[index] = editedTattooArtist;

      const cellsToUpdate = rowToUpdate.querySelectorAll('td');
      cellsToUpdate[0].textContent = editedTattooArtist.nombre;
      cellsToUpdate[1].textContent = editedTattooArtist.apellido;
      cellsToUpdate[2].textContent = editedTattooArtist.celular;
      cellsToUpdate[3].textContent = editedTattooArtist.documento;
      cellsToUpdate[4].textContent = editedTattooArtist.correo;
      cellsToUpdate[5].textContent = editedTattooArtist.contraseña;

      closeForm();
    } else {
      saveNewTattooArtist(editedTattooArtist);
    }
  }

  function deleteTattooArtist(row) {
    const index = Array.from(tattooArtists.children).indexOf(row);
    tattooData.splice(index, 1);
    row.remove();
  }

  tattooArtists.addEventListener('click', function (event) {
    if (event.target.classList.contains('deleteButton')) {
      const row = event.target.parentElement.parentElement;
      deleteTattooArtist(row);
    } else if (event.target.classList.contains('editButton')) {
      const row = event.target.parentElement.parentElement;
      const cells = row.querySelectorAll('td');
      const [nombre, apellido, celular, documento, correo, contraseña] = [...cells].map(cell => cell.textContent);

      document.getElementById('nombre').value = nombre;
      document.getElementById('apellido').value = apellido;
      document.getElementById('celular').value = celular;
      document.getElementById('documento').value = documento;
      document.getElementById('correo').value = correo;
      document.getElementById('contraseña').value = contraseña;

      tattooTable.style.display = 'none';
      createForm.style.display = 'block';
      createForm.dataset.editMode = 'true';
    }
  });

  createButton.addEventListener('click', openForm);

  createForm.addEventListener('submit', (event) => {
    event.preventDefault();
    saveOrUpdateTattooArtist();
  });

  populateTable(tattooData);
});

const closeButton = document.getElementById('closeButton');

closeButton.addEventListener('click', closeForm);
function openForm() {
    tattooTable.style.display = 'none';
    createForm.style.display = 'block';
    createButton.style.display = 'none';
    closeButton.style.display = 'block'; // Mostrar el botón "x"
  }

  function closeForm(form) {
    tattooTable.style.display = 'table';
    form.style.display = 'none';
    createButton.style.display = 'block';
    closeButton.style.display = 'none'; // Ocultar el botón "x"
    form.reset(); // Resetear el formulario al cerrarlo
  }

  </script>
   